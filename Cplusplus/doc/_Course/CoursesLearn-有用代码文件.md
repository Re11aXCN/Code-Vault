# å¹¶å‘



## atomic

### 1. mtpool.hpp

> **å¤šçº¿ç¨‹æµ‹è¯•**

- åˆ›å»ºå¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œæµ‹è¯•ä»£ç 
- ä½¿ç”¨æ …æ (barrier)ç¡®ä¿æ‰€æœ‰çº¿ç¨‹åŒæ­¥å¼€å§‹å’Œç»“æŸ
- ç»‘å®šçº¿ç¨‹åˆ°ä¸åŒCPUæ ¸å¿ƒå®ç°çœŸæ­£å¹¶è¡Œ

### 2. spin_barrier.hpp

> **SpinBarrier** è®©å¤šä¸ªçº¿ç¨‹åœ¨æŸä¸ªæ‰§è¡Œç‚¹ç­‰å¾…ï¼Œç›´åˆ°æ‰€æœ‰çº¿ç¨‹éƒ½åˆ°è¾¾è¯¥ç‚¹åæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚

1. **ä¸ `std::barrier` çš„åŒºåˆ«**

| ç‰¹æ€§         | SpinBarrier      | std::barrier       |
| ------------ | ---------------- | ------------------ |
| **ç­‰å¾…ç­–ç•¥** | è‡ªæ—‹ç­‰å¾…(å¿™ç­‰å¾…) | é˜»å¡ç­‰å¾…(çº¿ç¨‹ä¼‘çœ ) |
| **CPUä½¿ç”¨**  | é«˜(æŒç»­æ£€æŸ¥æ¡ä»¶) | ä½(çº¿ç¨‹è®©å‡ºCPU)    |
| **å»¶è¿Ÿ**     | ä½(ç«‹å³å“åº”)     | è¾ƒé«˜(çº¿ç¨‹å”¤é†’å¼€é”€) |
| **é€‚ç”¨åœºæ™¯** | çŸ­æ—¶é—´ç­‰å¾…       | é•¿æ—¶é—´ç­‰å¾…         |

2. **ä¸ `std::latch` çš„åŒºåˆ«**

| ç‰¹æ€§           | SpinBarrier     | std::latch    |
| -------------- | --------------- | ------------- |
| **å¯é‡ç”¨æ€§**   | âœ… å¯é‡å¤ä½¿ç”¨    | âŒ ä¸€æ¬¡æ€§ä½¿ç”¨  |
| **çº¿ç¨‹æ•°å¯å˜** | âŒ å›ºå®šçº¿ç¨‹æ•°    | âœ… å¯åŠ¨æ€è°ƒæ•´  |
| **åŒæ­¥æ–¹å‘**   | åŒå‘(ç­‰å¾…+ç»§ç»­) | å•å‘(è®¡æ•°åˆ°0) |



é€‚åˆä½¿ç”¨ SpinBarrierï¼š

- **é«˜æ€§èƒ½è®¡ç®—**ï¼šç­‰å¾…æ—¶é—´æçŸ­(çº³ç§’/å¾®ç§’çº§)
- **å®æ—¶ç³»ç»Ÿ**ï¼šéœ€è¦ç¡®å®šæ€§å»¶è¿Ÿ
- **å†…æ ¸å¼€å‘**ï¼šä¸èƒ½è¿›è¡Œçº¿ç¨‹è°ƒåº¦çš„ç¯å¢ƒ

é€‚åˆä½¿ç”¨ std::barrier/std::latchï¼š

- **é€šç”¨åº”ç”¨ç¨‹åº**ï¼šç­‰å¾…æ—¶é—´ä¸ç¡®å®š
- **I/Oå¯†é›†å‹ä»»åŠ¡**ï¼šçº¿ç¨‹å¯èƒ½é•¿æ—¶é—´ç­‰å¾…
- **èŠ‚èƒ½è€ƒè™‘**ï¼šå‡å°‘CPUå ç”¨

### 3. spin_mutex.hpp

> è‡ªæ—‹é”ï¼Œè¯¦ç»†è§[Standard/å¹¶å‘æ”¯æŒåº“.md - ç¬¬å…­ç«  é”çš„æ€§èƒ½æµ‹è¯•]()



------



## thread

### 1. mtqueue.hpp

> å°å½­è€å¸ˆç¼–å†™çš„å¤šçº¿ç¨‹é˜Ÿåˆ—ï¼Œæ²¡æœ‰æ€§èƒ½ç“¶é¢ˆmt_queueçš„æ³›ç”¨æ€§å’Œæ˜“ç”¨æ€§å’Œç»´æŠ¤æ€§éƒ½æ˜¯ä½ é€‰æ‹©å®ƒçš„ç†ç”±



## oldatomic

### 1. no_aba_concurrent_stack.cpp

> ä½¿ç”¨**æ ‡ç­¾æŒ‡é’ˆï¼ˆTagged Pointerï¼‰** ç­–ç•¥æ¥è§£å†³ABAé—®é¢˜çš„æ— é”å¹¶å‘é“¾è¡¨å®ç°



## co_asyncã€co_http

> åç¨‹ã€åç¨‹æœåŠ¡å™¨ï¼Œéœ€è¦ä»”ç»†ç ”ç©¶
>
> å·¥å…·
>
> co_async-master\co_async\utils



# è®¾è®¡æ¨¡å¼

## bind

### 1. Signal.hpp

> **è½»é‡çº§ä¿¡å·æ§½(signals-slots)ç³»ç»Ÿ**çš„å®ç°ï¼Œç±»ä¼¼äºQtçš„ä¿¡å·æ§½æœºåˆ¶ï¼Œä½†æ›´åŠ è½»é‡å’Œç°ä»£åŒ–
>
> - éƒ½æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ï¼Œæ”¯æŒä¸€å¯¹å¤šçš„é€šä¿¡
> - æ”¯æŒæ§½å‡½æ•°åœ¨ä¿¡å·å‘å°„æ—¶è¢«è‡ªåŠ¨è°ƒç”¨
> - æ”¯æŒæ§½å‡½æ•°çš„è‡ªåŠ¨ç®¡ç†ï¼ˆå¦‚è¿æ¥æ–­å¼€ï¼‰

ä¸»è¦ç»„æˆéƒ¨åˆ†

1. **CallbackResult æšä¸¾**ï¼šè¡¨ç¤ºæ§½å‡½æ•°æ‰§è¡Œåçš„ç»“æœï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼š
   - `Keep`ï¼šä¿ç•™æ§½å‡½æ•°ï¼Œç»§ç»­ä½¿ç”¨
   - `Erase`ï¼šç§»é™¤æ§½å‡½æ•°ï¼Œé€šå¸¸ç”¨äºä¸€æ¬¡æ€§æ§½å‡½æ•°æˆ–å½“å¯¹è±¡è¢«é”€æ¯æ—¶
2. **oneshot_t å’Œ nshot_t**ï¼šç”¨äºæŒ‡å®šæ§½å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°ã€‚
   - `oneshot`ï¼šä¸€æ¬¡æ€§æ§½å‡½æ•°ï¼Œè°ƒç”¨ä¸€æ¬¡åè‡ªåŠ¨ç§»é™¤
   - `nshot_t`ï¼šæŒ‡å®šæ¬¡æ•°çš„æ§½å‡½æ•°ï¼Œè°ƒç”¨æŒ‡å®šæ¬¡æ•°åè‡ªåŠ¨ç§»é™¤
3. **details_ å‘½åç©ºé—´**ï¼šåŒ…å«ä¸€äº›å®ç°ç»†èŠ‚ï¼Œå¦‚ï¼š
   - `lock_if_weak`ï¼šå¤„ç†å¼±æŒ‡é’ˆï¼Œå¦‚æœå¼±æŒ‡é’ˆæ— æ•ˆåˆ™è¿”å›ç©ºï¼Œç”¨äºå¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
   - å¤šä¸ª `bind` å‡½æ•°ï¼šå°†æˆå‘˜å‡½æ•°ç»‘å®šä¸ºæ§½å‡½æ•°ï¼Œæ”¯æŒä¸€æ¬¡æ€§ã€å¤šæ¬¡å’Œæ°¸ä¹…ç»‘å®š



## design

> è®¾è®¡æ¨¡å¼æ–‡æ¡£



# åå°„

## reflect-hpp-master

### 1.reflect.hpp

> C++çš„é™æ€åå°„ï¼Œå®ƒå…è®¸åœ¨ç¼–è¯‘æ—¶è·å–ç»“æ„ä½“çš„æˆå‘˜ä¿¡æ¯ï¼Œå¹¶æä¾›äº†éå†æˆå‘˜çš„èƒ½åŠ›ã€‚è¿™ä¸ªåº“é€šè¿‡å®å’Œæ¨¡æ¿æŠ€æœ¯å®ç°ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
>
> 1. éå†ç»“æ„ä½“çš„æ‰€æœ‰æˆå‘˜ï¼Œå¹¶è·å–æ¯ä¸ªæˆå‘˜çš„åç§°å’ŒæŒ‡é’ˆã€‚
> 2. æ ¹æ®æˆå‘˜åç§°è·å–æˆå‘˜çš„å€¼æˆ–ç±»å‹ã€‚
> 3. åˆ¤æ–­æˆå‘˜çš„ç±»å‹ï¼ˆæˆå‘˜å˜é‡ã€æˆå‘˜å‡½æ•°ã€é™æ€å˜é‡ã€é™æ€å‡½æ•°ç­‰ï¼‰ã€‚

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„**C++é™æ€åå°„åº“**ï¼Œæä¾›äº†åœ¨ç¼–è¯‘æ—¶è·å–å’Œæ“ä½œç±»æˆå‘˜ä¿¡æ¯çš„èƒ½åŠ›ã€‚è®©æˆ‘è¯¦ç»†åˆ†æå®ƒçš„åŠŸèƒ½ï¼š

1. **æˆå‘˜éå†å’Œè®¿é—®**

```cpp
struct Person {
    std::string name;
    int age;
    
    REFLECT(name, age)  // æ³¨å†Œåå°„ä¿¡æ¯
};

Person p{"John", 25};

// éå†æ‰€æœ‰æˆå‘˜
reflect::foreach_member(p, [](const char* name, auto& value) {
    std::cout << name << ": " << value << std::endl;
});
```

2. **æˆå‘˜æŒ‡é’ˆæ“ä½œ**

```cpp
// è·å–æˆå‘˜æŒ‡é’ˆä¿¡æ¯
reflect::foreach_member_ptr<Person>([](const char* name, auto member_ptr) {
    std::cout << "Member: " << name << std::endl;
});
```

3. **è¿è¡Œæ—¶æˆå‘˜æŸ¥è¯¢**

```cpp
// æ£€æŸ¥æˆå‘˜æ˜¯å¦å­˜åœ¨
bool has_age = reflect::has_member<Person>("age");

// è·å–æˆå‘˜å¼•ç”¨
int& age_ref = reflect::get_member<int>(p, "age");

// å®‰å…¨è·å–æˆå‘˜æŒ‡é’ˆ
int* age_ptr = reflect::try_get_member<int>(p, "age");
```

4. **æˆå‘˜ç±»å‹è¯†åˆ«**

```cpp
// æ£€æŸ¥æˆå‘˜ç§ç±»ï¼ˆå˜é‡/å‡½æ•°/é™æ€å˜é‡/é™æ€å‡½æ•°ï¼‰
bool is_var = reflect::is_member_kind<Person>("age", 
               reflect::member_kind::member_variable);

// æ£€æŸ¥å…·ä½“ç±»å‹
bool is_int = reflect::is_member_type<Person, int>("age");
```



**REFLECT_TYPE** - æ³¨å†Œå¤–éƒ¨ç±»å‹

```cpp
REFLECT_TYPE(Person, name, age)
```

**REFLECT** - ç±»å†…éƒ¨æ³¨å†Œ

```cpp
struct Person {
    std::string name;
    int age;
    REFLECT(name, age)  // åœ¨ç±»å†…éƒ¨ä½¿ç”¨
};
```

**REFLECT_TYPE_TEMPLATED** - æ¨¡æ¿ç±»æ³¨å†Œ

```cpp
template<typename T>
struct Container {
    T value;
};
REFLECT_TYPE_TEMPLATED((Container, T), value)
```

* åº”ç”¨åœºæ™¯

1. **åºåˆ—åŒ–/ååºåˆ—åŒ–**

```cpp
// è‡ªåŠ¨JSONåºåˆ—åŒ–
template<typename T>
std::string to_json(const T& obj) {
    std::stringstream ss;
    ss << "{";
    reflect::foreach_member(obj, [&](const char* name, auto& value) {
        ss << "\"" << name << "\": \"" << value << "\",";
    });
    ss << "}";
    return ss.str();
}
```

2. **å¯¹è±¡å…³ç³»æ˜ å°„(ORM)**

```cpp
// è‡ªåŠ¨ç”ŸæˆSQLè¯­å¥
template<typename T>
std::string create_table() {
    std::string sql = "CREATE TABLE " + get_table_name<T>() + " (";
    reflect::foreach_member_ptr<T>([&](const char* name, auto member) {
        sql += std::string(name) + " " + get_sql_type<decltype(member)>() + ", ";
    });
    sql += ");";
    return sql;
}
```

3. **æµ‹è¯•æ¡†æ¶**

```cpp
// è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰å­—æ®µ
template<typename T>
void test_all_fields(const T& obj) {
    reflect::foreach_member(obj, [](const char* name, auto& value) {
        std::cout << "Testing " << name << ": " << value << std::endl;
        // æ‰§è¡Œå„ç§æµ‹è¯•...
    });
}
```

4. **é…ç½®ç³»ç»Ÿ**

```cpp
// ä»é…ç½®æ–‡ä»¶åŠ è½½åˆ°å¯¹è±¡
template<typename T>
void load_from_config(T& obj, const Config& config) {
    reflect::foreach_member(obj, [&](const char* name, auto& value) {
        if (config.has(name)) {
            value = config.get<decltype(value)>(name);
        }
    });
}
```



### 2.reflect_json.hpp



## neorefelect

### 1. reflect.hpp

> **ç¼–è¯‘æ—¶åå°„**ï¼Œä¸»è¦ç”¨äºåœ¨ç¼–è¯‘æ—¶è·å–èšåˆç±»å‹ï¼ˆå¦‚ç»“æ„ä½“ï¼‰çš„æˆå‘˜ä¿¡æ¯ï¼ŒåŒ…æ‹¬æˆå‘˜æ•°é‡ã€æˆå‘˜çš„å€¼ã€ç±»å‹å’Œåç§°



## enumreflecttest

### 1. scienum.h

> åå°„å¾—åˆ°æšä¸¾åå­—ï¼Œå¯ä»¥å­¦ä¹ æ€è·¯ï¼Œæ­£å¸¸ä½¿ç”¨å»ºè®®ä½¿ç”¨`magic_enum`





# ç±»å‹èƒå–

## cpplifetimetest

### 1. cppdemangle.h

> **è·¨å¹³å° èƒå–æ­£ç¡®å®Œæ•´ç±»å‹ cvref**ï¼Œå…³äº`ç±»å‹èƒå–`è¯¦ç»†è§[Standard/ç±»å‹æ”¯æŒåº“.md - <type_info>]()



# ç®—æ³•

## cpprandomtest

### 1.main.cppï¼ˆxorshift32ã€wangshashéšæœºæ•°ç”Ÿæˆç®—æ³•ï¼‰



# parallel

## cpp17pmrtest

> æ‰€æœ‰æ–‡ä»¶å¯ä»¥é˜…è¯»å­¦ä¹ ä¸€ä¸‹ï¼ŒC++17çš„std::pmr

### 1. filter.cppï¼ˆ**AVX2æŒ‡ä»¤é›†**ã€æŸ¥æ‰¾è¡¨ï¼‰

> **ä½¿ç”¨AVX2æŒ‡ä»¤é›†å’Œé¢„è®¡ç®—çš„æŸ¥æ‰¾è¡¨å®ç°çš„é«˜æ€§èƒ½floatå‘é‡åŒ–è¿‡æ»¤å™¨**ï¼Œç”¨äºæ ¹æ®æ¯”è¾ƒæ¡ä»¶è¿‡æ»¤æ•°ç»„ä¸­çš„å…ƒç´ 

1. æ ¸å¿ƒåŠŸèƒ½

**ä»æµ®ç‚¹æ•°æ•°ç»„ `x` ä¸­ç­›é€‰å‡ºæ»¡è¶³æ¯”è¾ƒæ¡ä»¶ `cmp` çš„å…ƒç´ ï¼Œå­˜å…¥æ•°ç»„ `z`**

```cpp
// ç¤ºä¾‹ï¼šç­›é€‰å‡ºæ‰€æœ‰å¤§äº y çš„å…ƒç´ 
size_t count = filterp<_CMP_GT_OQ>(x, n, y, z);
```

2. å…³é”®æŠ€æœ¯è§£æ
   1. **æŸ¥æ‰¾è¡¨(LUT)é¢„è®¡ç®—**

```cpp
__m256i masklut[512];  // 512ä¸ªAVXå‘é‡
```
- **å‰åŠéƒ¨åˆ†(256ä¸ª)**ï¼šæ’åˆ—ç´¢å¼•ï¼Œå°†ç¬¦åˆæ¡ä»¶çš„å…ƒç´ èšé›†åˆ°å‘é‡å‰éƒ¨
- **ååŠéƒ¨åˆ†(256ä¸ª)**ï¼šå­˜å‚¨æ©ç ï¼Œæ§åˆ¶å“ªäº›å…ƒç´ å†™å…¥å†…å­˜
  2. **å‘é‡åŒ–å¤„ç†æµç¨‹**

```cpp
while (x + 16 <= xend) {  // æ¯æ¬¡å¤„ç†16ä¸ªå…ƒç´ 
    // åŠ è½½16ä¸ªå…ƒç´ ï¼Œåˆ†ä¸ºä¸¤ä¸ªAVXå‘é‡
    __m256 xi = _mm256_loadu_ps(x);
    __m256 xi2 = _mm256_loadu_ps(x + 8);
    
    // æ¯”è¾ƒå¹¶ç”Ÿæˆä½æ©ç 
    __m256 mask = _mm256_cmp_ps(xi, pred, cmp);
    size_t m = (size_t)_mm256_movemask_ps(mask) << 6;
    
    // ä½¿ç”¨LUTè·å–æ’åˆ—å’Œå­˜å‚¨æ©ç 
    __m256i wa = _mm256_load_si256(masklut + (m >> 5));      // æ’åˆ—ç´¢å¼•
    __m256i wb = _mm256_load_si256(masklut + (m >> 5) + 1);  // å­˜å‚¨æ©ç 
    
    // é‡æ’å¹¶æ¡ä»¶å­˜å‚¨
    xi = _mm256_permutevar8x32_ps(xi, wa);
    _mm256_maskstore_ps(z, wb, xi);
}
```

3. **LUTå·¥ä½œåŸç†**

å¯¹äº8ä½æ©ç  `i`ï¼ˆæ¯ä¸ªä½ä»£è¡¨ä¸€ä¸ªæ¯”è¾ƒç»“æœï¼‰ï¼š
- **æ’åˆ—å‘é‡**ï¼šå°†æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ç´¢å¼•æ”¾åœ¨å‰é¢
- **å­˜å‚¨æ©ç **ï¼šåªæœ‰å‰ `c` ä¸ªé€šé“ä¸º `-1`ï¼ˆc=ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ä¸ªæ•°ï¼‰

æ€§èƒ½ä¼˜åŒ–ç‰¹ç‚¹

ğŸš€ **å‘é‡åŒ–ä¼˜åŠ¿**

- **16å…ƒç´ å¹¶è¡Œå¤„ç†**ï¼šä½¿ç”¨ä¸¤ä¸ªAVXå‘é‡
- **é›¶åˆ†æ”¯é¢„æµ‹**ï¼šé¿å…æ¡ä»¶åˆ†æ”¯å¯¼è‡´çš„æµæ°´çº¿åœé¡¿
- **SIMDæŒ‡ä»¤**ï¼šå•æŒ‡ä»¤å¤šæ•°æ®

ğŸ¯ **å†…å­˜è®¿é—®ä¼˜åŒ–**

- **èšé›†-æ•£å°„æ¨¡å¼**ï¼šå°†åˆ†æ•£çš„æ»¡è¶³æ¡ä»¶å…ƒç´ èšé›†åˆ°è¿ç»­å†…å­˜
- **å¯¹é½å­˜å‚¨**ï¼š`_mm256_store_si256` ä½¿ç”¨å¯¹é½å­˜å‚¨æé«˜æ€§èƒ½

âš¡ **é¿å…æ ‡é‡å¤„ç†**

åªæœ‰åœ¨æœ€åå‰©ä½™å…ƒç´ ä¸è¶³16ä¸ªæ—¶æ‰ä½¿ç”¨æ ‡é‡å¤„ç†ï¼š
```cpp
for (; x < xend; x++) {  // æ ‡é‡å¤„ç†å°¾éƒ¨
    if (*x > y) *z++ = *x;
}
```

* ä½¿ç”¨ç¤ºä¾‹

```cpp
#include <immintrin.h>

int main() {
    const size_t n = 1000;
    float x[n], z[n];
    
    // åˆå§‹åŒ–æ•°æ®
    for (size_t i = 0; i < n; i++) x[i] = (float)i;
    
    // ç­›é€‰å‡ºæ‰€æœ‰å¤§äº500çš„å…ƒç´ 
    size_t count = filterp<_CMP_GT_OQ>(x, n, 500.0f, z);
    
    // z[0..count-1] ç°åœ¨åŒ…å«æ‰€æœ‰å¤§äº500çš„å…ƒç´ 
    return 0;
}
```

4. æ¯”è¾ƒæ“ä½œç¬¦

`cmp` å‚æ•°ä½¿ç”¨AVXæ¯”è¾ƒè°“è¯ï¼š
- `_CMP_GT_OQ`ï¼šå¤§äº (ordered, quiet)
- `_CMP_LT_OQ`ï¼šå°äº  
- `_CMP_EQ_OQ`ï¼šç­‰äº
- `_CMP_GE_OQ`ï¼šå¤§äºç­‰äº
- `_CMP_LE_OQ`ï¼šå°äºç­‰äº

5. æ€§èƒ½å¯¹æ¯”

ä¸æ ‡é‡ç‰ˆæœ¬å¯¹æ¯”ï¼š
```cpp
// æ ‡é‡å®ç°
size_t scalar_filter(float const* x, size_t n, float y, float* z) {
    auto zbeg = z;
    for (size_t i = 0; i < n; i++) {
        if (x[i] > y) *z++ = x[i];
    }
    return z - zbeg;
}
```

**æ€§èƒ½æå‡**ï¼šé¢„è®¡å‘é‡åŒ–ç‰ˆæœ¬æ¯”æ ‡é‡ç‰ˆæœ¬å¿« **8-15å€**

6. é€‚ç”¨åœºæ™¯

- **æ•°æ®åº“æŸ¥è¯¢**ï¼šWHEREæ¡ä»¶è¿‡æ»¤
- **ç§‘å­¦è®¡ç®—**ï¼šæ•°æ®é¢„å¤„ç†å’Œç­›é€‰
- **æ¸¸æˆå¼•æ“**ï¼šå¯è§æ€§è£å‰ªã€ç‰©ç†ç¢°æ’æ£€æµ‹
- **å›¾åƒå¤„ç†**ï¼šé˜ˆå€¼åˆ†å‰²
- **é‡‘èåˆ†æ**ï¼šæ¡ä»¶æ•°æ®ç­›é€‰



------



> 







# function

## 1.Function.hpp

> std::functionçš„å®ç°ç»†èŠ‚ï¼Œç®€å•å®ç°Function



# hexdump

## 1. cxxopts.hpp

è¿™æ˜¯ä¸€ä¸ª**C++å‘½ä»¤è¡Œå‚æ•°è§£æåº“**ï¼Œåä¸º `cxxopts`ã€‚è®©æˆ‘ä¸ºæ‚¨è¯¦ç»†è§£é‡Šå®ƒçš„åŠŸèƒ½å’Œç”¨é€”ï¼š

ä¸»è¦åŠŸèƒ½

1. **å‘½ä»¤è¡Œå‚æ•°è§£æ**

- è§£æç±»ä¼¼ `--input file.txt -o output --verbose` è¿™æ ·çš„å‘½ä»¤è¡Œå‚æ•°
- æ”¯æŒçŸ­é€‰é¡¹ (`-v`) å’Œé•¿é€‰é¡¹ (`--verbose`)
- æ”¯æŒå¸¦å€¼çš„å‚æ•° (`--file=data.txt`)

2. **ç‰¹æ€§äº®ç‚¹**

- **ç±»å‹å®‰å…¨**ï¼šè‡ªåŠ¨å°†å‚æ•°è½¬æ¢ä¸ºç›¸åº”çš„C++ç±»å‹
- **è‡ªåŠ¨ç”Ÿæˆå¸®åŠ©ä¿¡æ¯**ï¼šæ ¹æ®å®šä¹‰çš„é€‰é¡¹è‡ªåŠ¨ç”Ÿæˆ `--help` è¾“å‡º
- **çµæ´»çš„é€‰é¡¹å®šä¹‰**ï¼š
  - å¿…éœ€/å¯é€‰å‚æ•°
  - é»˜è®¤å€¼
  - éšå¼å€¼
  - å®¹å™¨ç±»å‹ï¼ˆå¦‚vectorï¼‰
  - å¸ƒå°”æ ‡å¿—

åŸºæœ¬ç”¨æ³•ç¤ºä¾‹

```cpp
#include "cxxopts.hpp"

int main(int argc, char* argv[]) {
    cxxopts::Options options("MyProgram", "A description of my program");
    
    // å®šä¹‰å‘½ä»¤è¡Œé€‰é¡¹
    options.add_options()
        ("h,help", "Print help")
        ("i,input", "Input file", cxxopts::value<std::string>())
        ("o,output", "Output file", cxxopts::value<std::string>()->default_value("out.txt"))
        ("v,verbose", "Verbose output", cxxopts::value<bool>()->default_value("false"))
        ("n,number", "Number of iterations", cxxopts::value<int>())
        ("files", "Input files", cxxopts::value<std::vector<std::string>>());
    
    // è§£æå‚æ•°
    auto result = options.parse(argc, argv);
    
    // å¤„ç†ç»“æœ
    if (result.count("help")) {
        std::cout << options.help() << std::endl;
        return 0;
    }
    
    if (result.count("input")) {
        std::string input_file = result["input"].as<std::string>();
        // ä½¿ç”¨è¾“å…¥æ–‡ä»¶...
    }
    
    bool verbose = result["verbose"].as<bool>();
    int number = result["number"].as<int>();
    
    return 0;
}
```

ä»£ç ç»“æ„æ¦‚è§ˆ

1. æ ¸å¿ƒç±»

- **`Options`**ï¼šä¸»ç±»ï¼Œç”¨äºå®šä¹‰å’Œé…ç½®æ‰€æœ‰é€‰é¡¹
- **`ParseResult`**ï¼šå­˜å‚¨è§£æç»“æœ
- **`OptionAdder`**ï¼šæµç•…æ¥å£ç”¨äºæ·»åŠ é€‰é¡¹
- **`Value`**ï¼šç±»å‹ç³»ç»Ÿçš„åŸºç¡€ç±»

2. å…³é”®ç‰¹æ€§

1. **å¼‚å¸¸å¤„ç†**ï¼šæä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
2. **Unicodeæ”¯æŒ**ï¼šå¯é€‰çš„ICUåº“é›†æˆ
3. **æ— å¼‚å¸¸æ¨¡å¼**ï¼šå¯é€šè¿‡å®å®šä¹‰ç¦ç”¨å¼‚å¸¸
4. **è·¨å¹³å°**ï¼šæ”¯æŒGCCã€Clangã€MSVCç­‰ç¼–è¯‘å™¨

3. ä½¿ç”¨åœºæ™¯

è¿™ä¸ªåº“éå¸¸é€‚åˆéœ€è¦å¤æ‚å‘½ä»¤è¡Œæ¥å£çš„C++åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ï¼š
- å‘½ä»¤è¡Œå·¥å…·
- ç¼–è¯‘å™¨å‰ç«¯
- æ•°æ®å¤„ç†å·¥å…·
- ç³»ç»Ÿç®¡ç†å·¥å…·

ç›¸æ¯”æ‰‹åŠ¨è§£æ `argc/argv`ï¼Œè¿™ä¸ªåº“æä¾›äº†æ›´å®‰å…¨ã€æ›´æ˜“ç»´æŠ¤çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”è‡ªåŠ¨å¤„ç†äº†å¾ˆå¤šè¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†ã€‚



# IO

## iostream

### 1. cstdio.cpp

> è¾“å‡ºæµç¼“å†²ä»‹ç»



### 2. ostream.cpp

> å®ç°äº†ä¸€ä¸ª**Unixç³»ç»Ÿä¸‹çš„I/OæµæŠ½è±¡å±‚**ï¼Œæä¾›äº†ç±»ä¼¼äºC++æ ‡å‡†åº“æµçš„åŠŸèƒ½
>
> - `InStream`ï¼šæŠ½è±¡è¾“å…¥æµåŸºç±»
> - `OutStream`ï¼šæŠ½è±¡è¾“å‡ºæµåŸºç±»
> - æä¾›ç»Ÿä¸€çš„è¯»å†™æ¥å£
>
> å­¦ä¹ I/Oç”¨

## minilog-master

### 1. minilog.h

> æ—¥å¿—ã€å¯ä»¥å­¦ä¹ æ€è·¯ï¼Œæ­£å¸¸ä½¿ç”¨å»ºè®®ä½¿ç”¨`spdlog`



# STL

## stl_map/experiment

> æ‰€æœ‰ä»£ç å¯ä»¥å­¦ä¹ ï¼Œmapã€hashã€flatmapç­‰



# memory

## mallochookã€mallocvis-main

[mallocvis-main](https://github.com/archibate/mallocvis)ç ”å‘çš„ä¸€æ¬¾ç”¨äºå¯è§†åŒ–C/C++ç¨‹åºä¸­åŠ¨æ€å†…å­˜åˆ†é…çš„å·¥å…·

bç«™è§†é¢‘ï¼šhttps://www.bilibili.com/video/BV1if421B7Jo/

> ä¸€ä¸ª**å†…å­˜åˆ†é…è·Ÿè¸ªå’Œå¯è§†åŒ–å·¥å…·**
>
> - alloc_action.hpp: å®šä¹‰æ•°æ®ç»“æ„ã€æšä¸¾å’Œå¸¸é‡ï¼Œç”¨äºæè¿°å†…å­˜åˆ†é…æ“ä½œã€‚
> - check.cpp: å®ç°ä¸€ä¸ªå†…å­˜æ£€æŸ¥å·¥å…·ï¼Œç”¨äºæ£€æµ‹å†…å­˜æ³„æ¼ã€é‡å¤é‡Šæ”¾ç­‰é—®é¢˜ã€‚
> - hook.cpp: å®ç°å†…å­˜åˆ†é…å‡½æ•°çš„é’©å­ï¼Œè®°å½•æ‰€æœ‰å†…å­˜æ“ä½œï¼Œå¹¶æ”¶é›†æ•°æ®ã€‚
> - main.cpp: ä¸»ç¨‹åºï¼Œä½¿ç”¨å¤šç§STLå’Œç¬¬ä¸‰æ–¹åº“å®¹å™¨è¿›è¡Œå†…å­˜åˆ†é…ï¼Œç”¨äºæµ‹è¯•ã€‚
> - plot.cpp: å°†è®°å½•çš„å†…å­˜åˆ†é…æ•°æ®å¯è§†åŒ–ä¸ºSVGå›¾å½¢ã€‚

1. alloc_action.hpp
   - å®šä¹‰æšä¸¾AllocOpï¼Œè¡¨ç¤ºå†…å­˜åˆ†é…æ“ä½œç±»å‹ï¼ˆå¦‚Newã€Deleteã€Mallocã€Freeç­‰ï¼‰ã€‚
   - å®šä¹‰ç»“æ„ä½“AllocActionï¼Œè®°å½•ä¸€æ¬¡å†…å­˜åˆ†é…æ“ä½œçš„å…·ä½“ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ“ä½œç±»å‹ã€çº¿ç¨‹IDã€æŒ‡é’ˆã€å¤§å°ã€å¯¹é½ã€è°ƒç”¨åœ°å€å’Œæ—¶é—´ã€‚
   - å®šä¹‰ä¸€äº›å¸¸é‡æ•°ç»„ï¼Œå¦‚kAllocOpNamesï¼ˆæ“ä½œç±»å‹çš„å­—ç¬¦ä¸²åç§°ï¼‰ã€kAllocOpIsAllocationï¼ˆæ ‡è¯†æ“ä½œæ˜¯å¦ä¸ºåˆ†é…ï¼‰ã€kAllocOpPairï¼ˆé…å¯¹çš„æ“ä½œï¼Œå¦‚Newå¯¹åº”Deleteï¼‰ã€‚
   - å®šä¹‰å¸¸é‡kNoneï¼Œè¡¨ç¤ºæœªæŒ‡å®šçš„å€¼ã€‚
2. check.cpp
   - å®ç°ä¸€ä¸ªå…¨å±€å¯¹è±¡GlobalDataï¼Œç”¨äºè·Ÿè¸ªå½“å‰å·²åˆ†é…çš„å†…å­˜å—ã€‚
   - åœ¨GlobalDataçš„æ„é€ å‡½æ•°ä¸­å¯ç”¨è·Ÿè¸ªï¼Œææ„å‡½æ•°ä¸­è¾“å‡ºå†…å­˜æ³„æ¼ä¿¡æ¯ã€‚
   - é‡è½½äº†å…¨å±€çš„operator newå’Œoperator deleteï¼ˆåŒ…æ‹¬æ•°ç»„ç‰ˆæœ¬ã€å¯¹é½ç‰ˆæœ¬ç­‰ï¼‰ï¼Œåœ¨å†…å­˜åˆ†é…å’Œé‡Šæ”¾æ—¶è°ƒç”¨GlobalDataçš„onæ–¹æ³•è¿›è¡Œæ£€æŸ¥ã€‚
   - ä½¿ç”¨EnableGuardé˜²æ­¢åœ¨æ£€æŸ¥è¿‡ç¨‹ä¸­é€’å½’è°ƒç”¨ã€‚
   - åœ¨onæ–¹æ³•ä¸­ï¼Œæ ¹æ®æ“ä½œç±»å‹æ£€æŸ¥å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„åˆæ³•æ€§ï¼Œå¦‚é‡å¤åˆ†é…ã€é‡Šæ”¾ä¸å­˜åœ¨çš„å†…å­˜ã€é‡Šæ”¾å‡½æ•°ä¸åŒ¹é…ã€å¤§å°æˆ–å¯¹é½ä¸åŒ¹é…ç­‰ã€‚
3. hook.cpp
   - åŒæ ·å®ç°ä¸€ä¸ªå…¨å±€å¯¹è±¡GlobalDataï¼Œä½†è¿™é‡Œç”¨äºè®°å½•æ‰€æœ‰çš„å†…å­˜åˆ†é…æ“ä½œï¼ˆåŒ…æ‹¬Cé£æ ¼çš„malloc/freeç­‰ï¼‰ã€‚
   - é‡è½½äº†Cé£æ ¼çš„å†…å­˜åˆ†é…å‡½æ•°ï¼ˆmallocã€freeã€callocã€reallocç­‰ï¼‰å’ŒC++çš„operator new/deleteï¼Œè®°å½•æ¯æ¬¡æ“ä½œåˆ°actionsé˜Ÿåˆ—ä¸­ã€‚
   - åœ¨ç¨‹åºç»“æŸæ—¶ï¼ˆGlobalDataææ„æ—¶ï¼‰è°ƒç”¨plot_alloc_actionså‡½æ•°å°†è®°å½•çš„æ“ä½œå¯è§†åŒ–ã€‚
   - ä½¿ç”¨EnableGuardé˜²æ­¢é€’å½’è°ƒç”¨ã€‚
   - å¯¹äºä¸åŒçš„å¹³å°ï¼ˆUnixå’ŒWindowsï¼‰ä½¿ç”¨ä¸åŒçš„æ–¹å¼è·å–çº¿ç¨‹IDï¼Œå¹¶è®°å½•æ—¶é—´æˆ³ã€‚
4. main.cpp
   - ä¸»ç¨‹åºï¼Œä½¿ç”¨å¤šç§å®¹å™¨ï¼ˆvectorã€dequeã€listã€setã€unordered_setä»¥åŠç¬¬ä¸‰æ–¹åº“çš„robin_setã€flat_hash_setã€node_hash_setï¼‰è¿›è¡Œæ’å…¥æ“ä½œã€‚
   - æ¯æ¬¡æ’å…¥åç¡çœ 1å¾®ç§’ï¼Œä»¥äº§ç”Ÿä¸åŒçš„æ—¶é—´æˆ³ã€‚
   - ç”¨äºæµ‹è¯•å†…å­˜åˆ†é…å’Œé‡Šæ”¾ï¼Œå¹¶ç”Ÿæˆå†…å­˜æ“ä½œè®°å½•ã€‚
5. plot.cpp
   - å®šä¹‰LifeBlockç»“æ„ï¼Œè¡¨ç¤ºä¸€ä¸ªå†…å­˜å—çš„ç”Ÿå‘½å‘¨æœŸï¼ˆä»åˆ†é…åˆ°é‡Šæ”¾ï¼‰ã€‚
   - å°†è®°å½•çš„å†…å­˜åˆ†é…æ“ä½œè½¬æ¢ä¸ºLifeBlockï¼Œå¹¶æ”¶é›†æ‰€æœ‰å·²é‡Šæ”¾å’Œæœªé‡Šæ”¾ï¼ˆåœ¨ç¨‹åºç»“æŸæ—¶ä»å­˜åœ¨ï¼‰çš„å†…å­˜å—ã€‚
   - ä½¿ç”¨SVGæ ¼å¼ç»˜åˆ¶å†…å­˜ç”Ÿå‘½å‘¨æœŸå›¾ï¼Œæ¨ªè½´ä¸ºæ—¶é—´ï¼Œçºµè½´ä¸ºå†…å­˜å—ï¼ˆæŒ‰å¤§å°å †å ï¼‰ã€‚
   - æ¯ä¸ªå†…å­˜å—çš„é¢œè‰²æ ¹æ®å…¶åˆ†é…å’Œé‡Šæ”¾çš„è°ƒç”¨åœ°å€ç”Ÿæˆæ¸å˜ï¼Œä»¥åŒºåˆ†ä¸åŒçš„è°ƒç”¨æ¥æºã€‚
   - æ”¯æŒç”ŸæˆHTMLæ–‡ä»¶ï¼Œå†…åµŒSVGï¼Œå¹¶åŒ…å«ç¼©æ”¾å’Œæ‹–æ‹½åŠŸèƒ½ã€‚







# time

## muduotest

### 1. muduo_jd.cpp

> **muduoæ•°å­¦å…¬å¼æ–¹æ³•**å’Œ**chronoåº“æ–¹æ³•toJulianDay()**å®ç°äº†ä¸¤ç§å°†æ—¥æœŸè½¬æ¢ä¸ºå„’ç•¥æ—¥(Julian Day)çš„æ–¹æ³•ï¼Œå¹¶æä¾›äº†æ€§èƒ½æµ‹è¯•æ¡†æ¶



## ScopeProfiler

### 1. ScopeProfiler.h

> ä½¿ç”¨RAIIæŠ€æœ¯ä»¿ç…§C++benchmark æ€§èƒ½æµ‹è¯•ç±»





# moderncuda

> cudaå­¦ä¹ ï¼Œå¾…çœ‹Bç«™çš„è§†é¢‘

